{% extends 'my_calendar/base.html' %}
{% block user_content %}
{% if errors %}
    <p>{{ errors }}</p>
{% endif %}
<form method="POST" id="calendar_form">
    {% csrf_token %}
    <p><label for="id_name">Name:</label>
    <input id="id_name" maxlength="100" name="name" type="text" required /></p>
    <p><label for="id_color">Choose color:</label>
    {% for color in colors %}
        <div style="background-color: #{{ color }}; height:20px; width:20px;" class="colors" name="#{{ color }}"></div>
    {% endfor %}
    <div id="can_read">Choose users who can read your calendar:
    {% for user in calendar_form.can_read %}
        <p>{{ user }}</p>
    {% endfor %}
    </div>
    <div id="can_modify">Choose users who can modify events in your calendar:
    {% for user in calendar_form.can_modify %}
        <p>{{ user }}</p>
    {% endfor %}
    </div>
    <input id="id_color" name="color" type="hidden"/></p>
    <button type="submit" id="save_calendar">Save calendar</button>
</form>
<script>
    var colors = document.getElementsByClassName("colors");
    colors[0].className += " active";
    input = document.getElementById("id_color");
    input.value = colors[0].getAttribute("name");
    
    for (var i = 0; i < colors.length; i++) {
        colors[i].onclick = function(){
            old = document.getElementsByClassName("active")[0];
            old.className = "colors";
            this.className += " active";
            input.value = this.getAttribute("name");
        };
    }
</script>
{% endblock user_content %}