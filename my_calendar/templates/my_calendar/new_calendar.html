{% extends 'my_calendar/base.html' %}
{% load staticfiles %}
{% block content %}

    {% if form_errors %}
        <p>{{ form_errors }}</p>
    {% endif %}

    <form method="POST" id="calendar_form">
        {% csrf_token %}
        <div>
            <label for="id_name">Name:</label>
            <input id="id_name" maxlength="100" name="name" type="text" required />
        </div>
        <div>
            <label for="id_color">Choose color:</label>
            <input id="id_color" name="color" type="hidden"/>
        </div>
        {% for color in colors %}
            <div style="background-color: {{ color }}; height:20px; width:20px;" class="colors" name="{{ color }}"></div>
        {% endfor %}
        <ul id="readers">Choose users who can read your calendar:
            {% for user in calendar_form.readers %}
                <li>{{ user }}</li>
            {% endfor %}
        </ul>
        <ul id="modifiers">Choose users who can modify events in your calendar:
            {% for user in calendar_form.modifiers %}
                <li>{{ user }}</li>
            {% endfor %}
        </ul>
        <button type="submit" id="save_calendar">Save calendar</button>
    </form>

    <script src="{% static 'calendar_form_colors.js' %}"></script>
    <script>
        colors[0].className += " active";
        const input = document.getElementById("id_color");
        input.value = colors[0].getAttribute("name");
    </script>
{% endblock content %}
