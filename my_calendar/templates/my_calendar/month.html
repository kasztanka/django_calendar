{% extends 'my_calendar/base.html' %}
{% load modulo %}
{% block user_content %}
{% if date_errors %}
    <p>{{ date_errors }}</p>
{% endif %}
<a id="month" href="/month/{{ choosen_date|date:'Y-m-d' }}">Month</a>
<a id="week" href="/week/{{ choosen_date|date:'Y-m-d' }}">Week</a>
<a id="day" href="/day/{{ choosen_date|date:'Y-m-d' }}">1 day</a>
<div id="calendars">Calendars:
{% for cal in calendars %}
    <div>
        <div id="calendar_{{ cal.pk }}" style="height:20px; width:20px; border:1px solid; background-color:{{ cal.color }}; display:inline-block;"
        onclick="DisplayOfEvents('calendar_{{ cal.pk }}', '{{ cal.color }}');return false;"></div>
        <span>{{ cal.name }}</span>
    </div>
{% endfor %}
    <div>
        <div id="calendar_other" style="height:20px; width:20px; border:1px solid; background-color:#FECA5C; display:inline-block;"
        onclick="DisplayOfEvents('calendar_other', '#FECA5C');return false;"></div>
        <span>Others</span>
    </div>
</div>
<table>
    <tr>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
        <th>Saturday</th>
        <th>Sunday</th>
    </tr>
    {% for dict_ in days %}
        {% if forloop.counter0|modulo:7 == 0 %}
            <tr>
        {% endif %}
        <td>{{ dict_.day|date:"d M" }}
        <div>
        {% for event in dict_.events %}
        <a href="{% url 'my_calendar:event_view' event_pk=event.pk %}">
            <div style="background-color:{{ event.color }};" class="calendar_{{ event.class }}">{{ event.title }}</div></a>
        {% endfor %}
        </div>
        </td>
        {% if forloop.counter0|modulo:7 == 6 %}
            </tr>
        {% endif %}
    {% endfor %}
</table>
<script>
    function DisplayOfEvents(calendar, color) {
        var square, events;
        square = document.getElementById(calendar);
        if (square.style.backgroundColor !== 'transparent') {
            square.style.backgroundColor = 'transparent';
            events = document.getElementsByClassName(calendar);
            for (var i = 0; i < events.length; i++) {
                events[i].style.display = 'none';
            }
        }
        else {
            square.style.backgroundColor = color;
            events = document.getElementsByClassName(calendar);
            for (var i = 0; i < events.length; i++) {
                events[i].style.display = 'block';
            }
        }
    };
</script>
{% endblock %}